<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platformer Demon List</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <link rel="stylesheet" href="/src/css/min/main.min.css">
    <link rel="stylesheet" href="/src/css/min/nav.min.css">
    <link rel="stylesheet" href="/src/css/min/footer.min.css">
    <link rel="stylesheet" href="/src/css/min/player.min.css">
    <link rel="stylesheet" href="/src/css/min/account.min.css">
    <meta name="color-scheme" content="dark">

    <link rel="apple-touch-icon" sizes="180x180" href="/meta/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/meta/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/meta/favicon-16x16.png">
    <link rel="manifest" href="/meta/site.webmanifest">
</head>
<body>
    <!---->
    {% include "template/nav.html" %}
    <!---->
    <button class="jump hidden">
        <span class="material-symbols-outlined">arrow_upward_alt</span>
        <p>Scroll to Top</p>
    </button>
    <!---->
    <main>
        <div class="container">
            <div class="player">
                {% if account.player %}
                    <h1>
                        <img src="{{ account.image }}=s48-c" referrerpolicy="no-referrer" alt="Your profile picture" class="{{ account.profile_shape }}">
                        <span title="
                            {% if account.player.rank <= 25 %}
                                #{{ account.player.rank }}
                            {% endif %}
                        " class="rank">
                            {% if account.player.rank <= 1 %}
                                <img title="#{{ account.player.rank }}" src="/src/img/diamondTrophy.png">
                            {% elif account.player.rank <= 5 %}
                                <img title="#{{ account.player.rank }}" src="/src/img/goldTrophy.png">
                            {% elif account.player.rank <= 10 %}
                                <img title="#{{ account.player.rank }}" src="/src/img/silverTrophy.png">
                            {% elif account.player.rank <= 25 %}
                                <img title="#{{ account.player.rank }}" src="/src/img/bronzeTrophy.png">
                            {% else %}
                                #{{ account.player.rank }}
                            {% endif %}

                            {% if account.player.rank <= 25 %}
                                <p class="
                                    {% if account.player.rank <= 1 %}
                                        diamond
                                    {% elif account.player.rank <= 5 %}
                                        gold
                                    {% elif account.player.rank <= 10 %}
                                        silver
                                    {% elif account.player.rank <= 25 %}
                                        bronze
                                    {% endif %}
                                ">#{{ account.player.rank }}</p>
                            {% endif %}
                        </span>
                        <hr>
                        <span class="name">
                            {{ account.player.name }}
                            <span class="device material-symbols-outlined">
                                {% if account.player.device == 'Desktop' %}
                                    computer
                                {% elif account.player.device == 'Mobile' %}
                                    smartphone
                                {% elif account.player.device == 'Both' %}
                                    devices
                                {% endif %}
                            </span>
                        </span>
                    </h1>
                    <hr>
                    <div class="stats">
                        <span>
                            <h3>Score</h3>
                            <p>{{ account.player.points }}</p>
                        </span>
                        <span>
                            <h3>Completions</h3>
                            <p>{{ account.player.records | length }}</p>
                        </span>
                        <span>
                            <h3>Verifications</h3>
                            <p>{{ account.player.verifications | length }}</p>
                        </span>
                    </div>
                {% else %}
                    <h1>
                        <img src="{{ account.image }}=s48-c" referrerpolicy="no-referrer" alt="Your profile picture">
                        <hr>
                        <span class="name">
                            Unregistered User
                        </span>
                    </h1>
                {% endif %}
            </div>
            {% if account.status == "Migrating" %}
                <div class="migration">
                    <h1>Migration Status</h1>
                    <div class="content">
                        <span class="info">
                            <span>
                                <h3>Requested:</h3>
                                <p>{{ migration.requested }}</p>
                            </span>
                            <span class="id">
                                <h3>Request ID:</h3>
                                <p>{{ migration.id }}<span class="material-symbols-outlined">content_paste</span></p>
                            </span>
                        </span>
                        <div class="discord 
                            {% if migration.discord.banner != "" %}
                                nitro
                            {% endif %}"
                            >
                            <span class="banner" style="
                                background-color: #{{ migration.discord.accent_color }};
                                background-image:
                                    url('https://cdn.discordapp.com/banners/{{ migration.discord.user_id }}/{{ migration.discord.banner }}.gif?size=600'),
                                    url('https://cdn.discordapp.com/banners/{{ migration.discord.user_id }}/{{ migration.discord.banner }}.png?size=600');
                            "></span>
                            <img src="https://cdn.discordapp.com/avatars/{{ migration.discord.user_id }}/{{ migration.discord.avatar }}.webp?size=80" alt="{{ migration.discord.global_name }}">
                            <span class="inner">
                                <h1>{{ migration.discord.global_name }}</h1>
                                <p>{{ migration.discord.username }}</p>
                            </span>
                        </div>
                    </div>
                </div>
            {% endif %}
            {% if account.player %}
                <div class="records">
                    <h1>Records</h1>
                    <div class="table">
                        {% for record in account.player.records %}
                            <div>
                                <a href="/level/{{ record.level.level_id }}">
                                    <span class="placement">#{{ record.level.placement }}</span>
                                    <span class="level">{{ record.level.name }}</span>
                                </a>
                                <hr class="divider">
                                <a href="
                                    {% if 'https://' in record.video_id %}
                                        {{ record.video_id }}
                                    {% else %}
                                        https://youtu.be/{{ record.video_id }}
                                    {% endif %}
                                " target="_blank">
                                    <span class="time">
                                        {{ record.time_format }}<span class="ms">.{{ record.time_ms }}</span>
                                    </span>
                                    <span class="rank">#{{ record.rank }}</span>
                                </a>
                                </span>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        </div>
    </main>
    <!---->
    {% include "template/footer.html" %}
    <!---->
</body>

<script src="/src/js/main.js"></script>
<script src="/src/js/navbar.js"></script>
<script src="/src/js/jump.js"></script>
<script src="/src/js/account.js"></script>

</html>
